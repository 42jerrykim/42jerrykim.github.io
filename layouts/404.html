<!DOCTYPE html>
<html lang="{{ .Site.LanguageCode }}">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noindex">
        <title>페이지를 찾을 수 없습니다 · Redirecting to Search</title>
        <script>
        (function() {
            try {
                var url = new URL(window.location.href);
                var params = new URLSearchParams(url.search);
                // 우선 URL 파라미터에서 검색어를 찾고, 없으면 경로에서 유추
                var q = params.get('keyword') || params.get('q') || params.get('search') || '';
                if (!q) {
                    var path = (url.pathname || '').replace(/\/+/, '/').replace(/^\/+|\/+$/g, '');
                    // 마지막 세그먼트를 우선 사용, 없으면 전체 경로를 사용
                    var segments = path.split('/').filter(Boolean);
                    var last = segments.length ? segments[segments.length - 1] : '';
                    var guess = decodeURIComponent(last || path)
                        .replace(/\.(html|htm|md)$/i, '')
                        .replace(/[\-_]/g, ' ')
                        .trim();
                    q = guess;
                }

                var target = '/search/';
                var redirect = target + (q ? ('?keyword=' + encodeURIComponent(q)) : '');
                // 즉시 리디렉션
                window.location.replace(redirect);
            } catch (e) {
                // 실패 시 기본 검색 페이지로 이동
                window.location.replace('/search/');
            }
        })();
        </script>
        <noscript>
            <meta http-equiv="refresh" content="2;url=/search/">
        </noscript>
        <style>
            body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji"; margin: 2rem; }
            a { color: #007acc; }
        </style>
    </head>
    <body>
        <h1>404 · 페이지를 찾을 수 없습니다</h1>
        <p>요청하신 페이지가 존재하지 않습니다. 곧 <strong>검색 페이지</strong>로 이동합니다.</p>
        <p><a id="redirect-link" href="/search/">검색 페이지로 바로 가기</a></p>
        <script>
        (function(){
            try {
                var link = document.getElementById('redirect-link');
                if (!link) return;
                var url = new URL(window.location.href);
                var params = new URLSearchParams(url.search);
                var q = params.get('keyword') || params.get('q') || params.get('search') || '';
                if (!q) {
                    var path = (url.pathname || '').replace(/^\/+|\/+$/g, '');
                    var segments = path.split('/').filter(Boolean);
                    var last = segments.length ? segments[segments.length - 1] : '';
                    var guess = decodeURIComponent(last || path)
                        .replace(/\.(html|htm|md)$/i, '')
                        .replace(/[\-_]/g, ' ')
                        .trim();
                    q = guess;
                }
                if (q) {
                    link.href = '/search/?keyword=' + encodeURIComponent(q);
                }
            } catch (e) {
                // ignore
            }
        })();
        </script>
    </body>
</html>


