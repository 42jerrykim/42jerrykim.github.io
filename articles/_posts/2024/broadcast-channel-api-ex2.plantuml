@startuml test3
actor User as 사용자
boundary Browser as 브라우저
control BroadcastChannel as 채널
control CounterUpdateFunction as "updateCounter 함수"
control OnMessageHandler as "onmessage 핸들러"
control IncrementHandler as "Increment 핸들러"
control DecrementHandler as "Decrement 핸들러"

사용자 -> 브라우저 : 브라우저 열기
브라우저 -> 채널 : 'counter_channel' 생성

사용자 -> IncrementHandler : Increment 버튼 클릭
IncrementHandler -> 브라우저 : count++
IncrementHandler -> CounterUpdateFunction : updateCounter() 호출
CounterUpdateFunction -> 브라우저 : 카운터 값 갱신
CounterUpdateFunction -> 채널 : 메시지 전송 (현재 카운터 값)

사용자 -> DecrementHandler : Decrement 버튼 클릭
DecrementHandler -> 브라우저 : count--
DecrementHandler -> CounterUpdateFunction : updateCounter() 호출
CounterUpdateFunction -> 브라우저 : 카운터 값 갱신
CounterUpdateFunction -> 채널 : 메시지 전송 (현재 카운터 값)

채널 -> OnMessageHandler : 메시지 수신
OnMessageHandler -> 브라우저 : count 값 업데이트
OnMessageHandler -> CounterUpdateFunction : updateCounter() 호출
CounterUpdateFunction -> 브라우저 : 카운터 값 갱신

@enduml
