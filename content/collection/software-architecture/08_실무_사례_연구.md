---
draft: true
---
# 8ì¥. ì‹¤ë¬´ ì‚¬ë¡€ ì—°êµ¬

## ğŸ“‹ í•™ìŠµ ëª©í‘œ
- ëŒ€ê·œëª¨ ì‹œìŠ¤í…œì˜ ì‹¤ì œ ì•„í‚¤í…ì²˜ ì‚¬ë¡€ë¥¼ ë¶„ì„í•œë‹¤
- ë ˆê±°ì‹œ ì‹œìŠ¤í…œ ëª¨ë˜í™” ê³¼ì •ê³¼ ì „ëµì„ ì´í•´í•œë‹¤
- í´ë¼ìš°ë“œ ë§ˆì´ê·¸ë ˆì´ì…˜ì˜ ì‹¤ë¬´ì  ì ‘ê·¼ ë°©ë²•ì„ í•™ìŠµí•œë‹¤
- ì‹¤íŒ¨ ì‚¬ë¡€ë¥¼ í†µí•œ ìœ„í—˜ ìš”ì†Œì™€ íšŒí”¼ ì „ëµì„ íŒŒì•…í•œë‹¤

---

## 8.1 ëŒ€ê·œëª¨ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ ì‚¬ë¡€

### 8.1.1 Netflix: ìŠ¤íŠ¸ë¦¬ë° ì„œë¹„ìŠ¤ ì•„í‚¤í…ì²˜

#### ë¹„ì¦ˆë‹ˆìŠ¤ ë°°ê²½
- **ì„œë¹„ìŠ¤ ì „í™˜**: DVD ëŒ€ì—¬ â†’ ìŠ¤íŠ¸ë¦¬ë° ì„œë¹„ìŠ¤
- **ê¸€ë¡œë²Œ í™•ì¥**: 190ê°œ ì´ìƒ êµ­ê°€ ì„œë¹„ìŠ¤
- **ê·œëª¨**: ì›” 2ì–µ+ êµ¬ë…ì, ì‹œê°„ë‹¹ 1ì–µ+ ì‹œì²­ ì‹œê°„

#### í•µì‹¬ ì•„í‚¤í…ì²˜ ì „ëµ
```java
// Netflix ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì•„í‚¤í…ì²˜ ì˜ˆì œ
@RestController
@RequestMapping("/api/recommendations")
public class RecommendationController {
    
    @Autowired
    private RecommendationService recommendationService;
    
    @Autowired
    private UserProfileService userProfileService;
    
    @HystrixCommand(fallbackMethod = "getFallbackRecommendations")
    @GetMapping("/user/{userId}")
    public ResponseEntity<List<Content>> getRecommendations(@PathVariable String userId) {
        try {
            // ì‚¬ìš©ì í”„ë¡œí•„ ì¡°íšŒ
            UserProfile profile = userProfileService.getUserProfile(userId);
            
            // ê°œì¸í™”ëœ ì¶”ì²œ ìƒì„±
            List<Content> recommendations = recommendationService.generateRecommendations(profile);
            
            return ResponseEntity.ok(recommendations);
        } catch (Exception e) {
            // ì¥ì•  ìƒí™©ì—ì„œ ìºì‹œëœ ì¶”ì²œ ë°˜í™˜
            return getFallbackRecommendations(userId);
        }
    }
    
    public ResponseEntity<List<Content>> getFallbackRecommendations(String userId) {
        // ì¸ê¸° ì½˜í…ì¸  ê¸°ë°˜ ì¶”ì²œ
        List<Content> popularContent = recommendationService.getPopularContent();
        return ResponseEntity.ok(popularContent);
    }
}

// ë¶„ì‚° ìºì‹± ì „ëµ
@Service
public class ContentCacheService {
    
    @Autowired
    private RedisTemplate<String, Object> redisTemplate;
    
    @Cacheable(value = "content", key = "#contentId")
    public Content getContent(String contentId) {
        // ë‹¤ì¸µ ìºì‹± êµ¬ì¡°
        // L1: Application Cache (ë¡œì»¬)
        // L2: Redis Cache (ë¶„ì‚°)
        // L3: CDN Cache (ê¸€ë¡œë²Œ)
        return contentRepository.findById(contentId);
    }
    
    @CacheEvict(value = "content", key = "#contentId")
    public void invalidateContent(String contentId) {
        // ìºì‹œ ë¬´íš¨í™” ì „ëµ
        notifyCDNToInvalidate(contentId);
    }
}
```

### 8.1.2 Amazon: ì „ììƒê±°ë˜ í”Œë«í¼

#### ì•„í‚¤í…ì²˜ ì›ì¹™
- **ì„œë¹„ìŠ¤ ì§€í–¥ ì•„í‚¤í…ì²˜**: "Two Pizza Team" ê·œì¹™
- **API ìš°ì„  ì„¤ê³„**: ëª¨ë“  ì„œë¹„ìŠ¤ ê°„ API í†µì‹ 
- **ë°ì´í„° ì†Œìœ ê¶Œ**: ì„œë¹„ìŠ¤ë³„ ë°ì´í„° ë…ë¦½ì„±

```java
// Amazon ì£¼ë¬¸ ì²˜ë¦¬ ì•„í‚¤í…ì²˜ ì˜ˆì œ
@Service
public class OrderProcessingService {
    
    @Autowired
    private InventoryService inventoryService;
    
    @Autowired
    private PaymentService paymentService;
    
    @Autowired
    private FulfillmentService fulfillmentService;
    
    @Async
    public CompletableFuture<OrderResult> processOrder(Order order) {
        return CompletableFuture
            .supplyAsync(() -> inventoryService.reserveItems(order.getItems()))
            .thenCompose(reservation -> 
                paymentService.processPayment(order.getPaymentInfo())
                    .thenApply(payment -> new OrderReservation(reservation, payment))
            )
            .thenCompose(orderReservation -> 
                fulfillmentService.createShipment(order, orderReservation)
            )
            .thenApply(shipment -> new OrderResult(order.getId(), shipment.getId()))
            .exceptionally(throwable -> {
                // ë³´ìƒ íŠ¸ëœì­ì…˜ ì‹¤í–‰
                compensateFailedOrder(order);
                throw new OrderProcessingException("ì£¼ë¬¸ ì²˜ë¦¬ ì‹¤íŒ¨", throwable);
            });
    }
    
    private void compensateFailedOrder(Order order) {
        // Saga íŒ¨í„´ì„ í†µí•œ ë³´ìƒ íŠ¸ëœì­ì…˜
        inventoryService.releaseReservation(order.getId());
        paymentService.refundPayment(order.getId());
        fulfillmentService.cancelShipment(order.getId());
    }
}
```

### 8.1.3 Uber: ì‹¤ì‹œê°„ ìœ„ì¹˜ ê¸°ë°˜ ì„œë¹„ìŠ¤

#### ê¸°ìˆ ì  ë„ì „ê³¼ì œ
- **ì‹¤ì‹œê°„ ë§¤ì¹­**: ìˆ˜ë°±ë§Œ ë“œë¼ì´ë²„ì™€ ìŠ¹ê° ë§¤ì¹­
- **ì§€ë¦¬ì  ë¶„ì‚°**: ì „ ì„¸ê³„ ë„ì‹œë³„ ì„œë¹„ìŠ¤
- **ë™ì  ê°€ê²© ì±…ì •**: ìˆ˜ìš”/ê³µê¸‰ ê¸°ë°˜ ì‹¤ì‹œê°„ ìš”ê¸ˆ ê³„ì‚°

```java
// Uber ì‹¤ì‹œê°„ ë§¤ì¹­ ì‹œìŠ¤í…œ ì˜ˆì œ
@Service
public class RideMatchingService {
    
    @Autowired
    private LocationService locationService;
    
    @Autowired
    private DriverAvailabilityService driverService;
    
    public CompletableFuture<MatchResult> findDriver(RideRequest request) {
        // 1. ìŠ¹ê° ìœ„ì¹˜ ê¸°ë°˜ ì£¼ë³€ ë“œë¼ì´ë²„ ê²€ìƒ‰
        List<Driver> nearbyDrivers = locationService.findNearbyDrivers(
            request.getPickupLocation(), 
            SEARCH_RADIUS_KM
        );
        
        // 2. ì‚¬ìš© ê°€ëŠ¥í•œ ë“œë¼ì´ë²„ í•„í„°ë§
        List<Driver> availableDrivers = nearbyDrivers.stream()
            .filter(driver -> driverService.isAvailable(driver.getId()))
            .collect(Collectors.toList());
        
        // 3. ìµœì  ë“œë¼ì´ë²„ ì„ íƒ (ê±°ë¦¬, í‰ì , ì˜ˆìƒ ë„ì°© ì‹œê°„)
        return CompletableFuture.supplyAsync(() -> {
            return availableDrivers.stream()
                .map(driver -> calculateMatchScore(driver, request))
                .max(Comparator.comparing(MatchScore::getScore))
                .map(matchScore -> new MatchResult(matchScore.getDriver(), request))
                .orElseThrow(() -> new NoDriverAvailableException("ê·¼ì²˜ì— ì´ìš© ê°€ëŠ¥í•œ ë“œë¼ì´ë²„ê°€ ì—†ìŠµë‹ˆë‹¤"));
        });
    }
    
    private MatchScore calculateMatchScore(Driver driver, RideRequest request) {
        double distance = locationService.calculateDistance(
            driver.getCurrentLocation(), 
            request.getPickupLocation()
        );
        
        double eta = trafficService.estimateArrivalTime(
            driver.getCurrentLocation(), 
            request.getPickupLocation()
        );
        
        double rating = driver.getRating();
        
        // ê°€ì¤‘ì¹˜ ê¸°ë°˜ ì ìˆ˜ ê³„ì‚°
        double score = (1.0 / distance) * 0.4 + 
                      (1.0 / eta) * 0.3 + 
                      rating * 0.3;
        
        return new MatchScore(driver, score);
    }
}
```

---

## 8.2 ë ˆê±°ì‹œ ì‹œìŠ¤í…œ ëª¨ë˜í™”

### 8.2.1 ì€í–‰ ì‹œìŠ¤í…œ ëª¨ë˜í™” ì‚¬ë¡€

#### í˜„í™©ê³¼ ë„ì „ê³¼ì œ
- **ê¸°ì¡´ ì‹œìŠ¤í…œ**: 30ë…„ëœ COBOL ê¸°ë°˜ ë©”ì¸í”„ë ˆì„
- **ì¼ì¼ ê±°ë˜ëŸ‰**: ìˆ˜ë°±ë§Œ ê±´ì˜ ê¸ˆìœµ ê±°ë˜
- **ê·œì œ ìš”êµ¬ì‚¬í•­**: ì—„ê²©í•œ ë³´ì•ˆê³¼ ê·œì • ì¤€ìˆ˜

#### ëª¨ë˜í™” ì „ëµ: Strangler Fig íŒ¨í„´

```java
// ê¸°ì¡´ ì‹œìŠ¤í…œê³¼ ì‹ ê·œ ì‹œìŠ¤í…œì„ ì—°ê²°í•˜ëŠ” Facade
@RestController
@RequestMapping("/api/account")
public class AccountController {
    
    @Autowired
    private LegacyAccountService legacyService;
    
    @Autowired
    private ModernAccountService modernService;
    
    @Autowired
    private FeatureToggleService featureToggle;
    
    @GetMapping("/{accountId}")
    public ResponseEntity<Account> getAccount(@PathVariable String accountId) {
        // í”¼ì²˜ í† ê¸€ì„ í†µí•œ ì ì§„ì  ì „í™˜
        if (featureToggle.isEnabled("MODERN_ACCOUNT_SERVICE", accountId)) {
            return ResponseEntity.ok(modernService.getAccount(accountId));
        } else {
            return ResponseEntity.ok(legacyService.getAccount(accountId));
        }
    }
    
    @PostMapping("/{accountId}/transactions")
    public ResponseEntity<Transaction> createTransaction(
            @PathVariable String accountId,
            @RequestBody TransactionRequest request) {
        
        // ì½ê¸°ëŠ” ì‹ ê·œ ì‹œìŠ¤í…œ, ì“°ê¸°ëŠ” ë ˆê±°ì‹œ ì‹œìŠ¤í…œ (ì•ˆì „í•œ ì „í™˜)
        Transaction transaction = legacyService.createTransaction(accountId, request);
        
        // ë¹„ë™ê¸°ë¡œ ì‹ ê·œ ì‹œìŠ¤í…œì— ë°ì´í„° ë™ê¸°í™”
        modernService.syncTransactionAsync(transaction);
        
        return ResponseEntity.ok(transaction);
    }
}

// ë°ì´í„° ë™ê¸°í™” ì„œë¹„ìŠ¤
@Service
public class DataSynchronizationService {
    
    @EventListener
    @Async
    public void handleLegacyTransactionCreated(LegacyTransactionEvent event) {
        try {
            // ë ˆê±°ì‹œ ì‹œìŠ¤í…œì˜ ë°ì´í„°ë¥¼ ì‹ ê·œ ì‹œìŠ¤í…œìœ¼ë¡œ ë™ê¸°í™”
            Transaction modernTransaction = convertToModernFormat(event.getTransaction());
            modernAccountService.saveTransaction(modernTransaction);
            
            // ë™ê¸°í™” ì„±ê³µ ë¡œê·¸
            syncAuditService.recordSuccess(event.getTransactionId());
            
        } catch (Exception e) {
            // ë™ê¸°í™” ì‹¤íŒ¨ ì‹œ ì¬ì‹œë„ íì— ì¶”ê°€
            retryQueueService.addFailedSync(event.getTransactionId(), e);
            syncAuditService.recordFailure(event.getTransactionId(), e.getMessage());
        }
    }
}
```

### 8.2.2 ëª¨ë˜í™” ë‹¨ê³„ë³„ ì ‘ê·¼ë²•

#### 1ë‹¨ê³„: API ë˜í•‘
```java
// ë ˆê±°ì‹œ ì‹œìŠ¤í…œì„ REST APIë¡œ ë˜í•‘
@Component
public class LegacySystemAdapter {
    
    @Autowired
    private MainframeConnector mainframeConnector;
    
    public Account getAccountFromMainframe(String accountId) {
        // COBOL í”„ë¡œê·¸ë¨ í˜¸ì¶œ
        MainframeRequest request = new MainframeRequest()
            .setProgram("ACCT001")
            .setParameters(Map.of("ACCOUNT_ID", accountId));
        
        MainframeResponse response = mainframeConnector.call(request);
        
        // ë ˆê±°ì‹œ ë°ì´í„° í¬ë§·ì„ ëª¨ë˜ í¬ë§·ìœ¼ë¡œ ë³€í™˜
        return mapToModernAccount(response.getData());
    }
    
    private Account mapToModernAccount(String cobolData) {
        // ê³ ì • ê¸¸ì´ COBOL ë ˆì½”ë“œ íŒŒì‹±
        String accountId = cobolData.substring(0, 10).trim();
        String accountName = cobolData.substring(10, 50).trim();
        BigDecimal balance = new BigDecimal(cobolData.substring(50, 65).trim()).movePointLeft(2);
        
        return new Account(accountId, accountName, balance);
    }
}
```

#### 2ë‹¨ê³„: ì„œë¹„ìŠ¤ ë¶„í•´
```java
// ë„ë©”ì¸ë³„ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ë¶„í•´
@Service
public class CustomerService {
    
    // ê³ ê° ì •ë³´ëŠ” ì‹ ê·œ ì‹œìŠ¤í…œìœ¼ë¡œ ì™„ì „ ì´ê´€
    @Autowired
    private CustomerRepository customerRepository;
    
    public Customer createCustomer(CreateCustomerRequest request) {
        Customer customer = new Customer(
            generateCustomerId(),
            request.getName(),
            request.getEmail(),
            request.getPhone()
        );
        
        return customerRepository.save(customer);
    }
}

@Service  
public class AccountService {
    
    // ê³„ì¢Œ ì •ë³´ëŠ” ì•„ì§ ë ˆê±°ì‹œ ì‹œìŠ¤í…œ ì‚¬ìš©
    @Autowired
    private LegacyAccountService legacyAccountService;
    
    public Account getAccount(String accountId) {
        return legacyAccountService.getAccount(accountId);
    }
}
```

---

## 8.3 í´ë¼ìš°ë“œ ë§ˆì´ê·¸ë ˆì´ì…˜ ì‚¬ë¡€

### 8.3.1 ë¯¸ë””ì–´ íšŒì‚¬ í´ë¼ìš°ë“œ ì „í™˜

#### ë§ˆì´ê·¸ë ˆì´ì…˜ ì „ëµ (6R ëª¨ë¸)

```java
// Rehost (Lift & Shift) ì˜ˆì œ
@Configuration
public class DatabaseMigrationConfig {
    
    // ê¸°ì¡´ ì˜¨í”„ë ˆë¯¸ìŠ¤ DBë¥¼ AWS RDSë¡œ ì´ì „
    @Bean
    @Primary
    public DataSource primaryDataSource() {
        HikariConfig config = new HikariConfig();
        config.setJdbcUrl("jdbc:mysql://prod-rds.cluster-xxx.ap-northeast-2.rds.amazonaws.com:3306/media_db");
        config.setUsername(System.getenv("DB_USERNAME"));
        config.setPassword(System.getenv("DB_PASSWORD"));
        config.setMaximumPoolSize(20);
        config.setMinimumIdle(5);
        
        return new HikariDataSource(config);
    }
}

// Refactor (Cloud Native ì¬ì„¤ê³„) ì˜ˆì œ
@Service
public class VideoProcessingService {
    
    @Autowired
    private SqsTemplate sqsTemplate;
    
    @Autowired
    private S3Client s3Client;
    
    public void processVideo(VideoUploadEvent event) {
        // 1. S3ì—ì„œ ì›ë³¸ ë¹„ë””ì˜¤ ë‹¤ìš´ë¡œë“œ
        String videoUrl = event.getVideoUrl();
        
        // 2. Lambdaë¥¼ í†µí•œ ë¹„ë””ì˜¤ ì²˜ë¦¬ ì‘ì—… íì— ì¶”ê°€
        VideoProcessingRequest request = new VideoProcessingRequest(
            event.getVideoId(),
            videoUrl,
            List.of("720p", "1080p", "4K")
        );
        
        sqsTemplate.send("video-processing-queue", request);
    }
    
    @SqsListener("video-processing-completed")
    public void handleVideoProcessingCompleted(VideoProcessingCompletedEvent event) {
        // CloudFront CDN ìºì‹œ ë¬´íš¨í™”
        cloudFrontService.invalidateCache(event.getVideoId());
        
        // ì‚¬ìš©ìì—ê²Œ ì•Œë¦¼ ë°œì†¡
        notificationService.notifyVideoReady(event.getUserId(), event.getVideoId());
    }
}
```

### 8.3.2 ë§ˆì´ê·¸ë ˆì´ì…˜ ëª¨ë‹ˆí„°ë§ê³¼ ìµœì í™”

```java
// í´ë¼ìš°ë“œ ë¹„ìš© ìµœì í™”
@Component
public class CloudCostOptimizer {
    
    @Scheduled(cron = "0 0 2 * * *") // ë§¤ì¼ ìƒˆë²½ 2ì‹œ ì‹¤í–‰
    public void optimizeResources() {
        // 1. ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” EC2 ì¸ìŠ¤í„´ìŠ¤ ì •ë¦¬
        cleanupUnusedInstances();
        
        // 2. S3 ìŠ¤í† ë¦¬ì§€ í´ë˜ìŠ¤ ìµœì í™”
        optimizeS3StorageClass();
        
        // 3. ì˜ˆì•½ ì¸ìŠ¤í„´ìŠ¤ ì¶”ì²œ
        analyzeReservedInstanceOpportunities();
    }
    
    private void optimizeS3StorageClass() {
        // 30ì¼ ì´ìƒ ì ‘ê·¼í•˜ì§€ ì•Šì€ íŒŒì¼ì„ IAë¡œ ì´ë™
        s3Client.listObjectsV2(ListObjectsV2Request.builder()
            .bucket("media-content-bucket")
            .build())
            .contents()
            .stream()
            .filter(object -> object.lastModified().isBefore(Instant.now().minus(30, ChronoUnit.DAYS)))
            .forEach(object -> {
                s3Client.copyObject(CopyObjectRequest.builder()
                    .sourceBucket("media-content-bucket")
                    .sourceKey(object.key())
                    .destinationBucket("media-content-bucket")
                    .destinationKey(object.key())
                    .storageClass(StorageClass.STANDARD_IA)
                    .build());
            });
    }
}

// í´ë¼ìš°ë“œ ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§
@Component
public class CloudMetricsCollector {
    
    @Autowired
    private CloudWatchClient cloudWatchClient;
    
    @EventListener
    public void recordApiLatency(ApiCallEvent event) {
        // CloudWatch ë©”íŠ¸ë¦­ ë°œì†¡
        PutMetricDataRequest request = PutMetricDataRequest.builder()
            .namespace("MyApp/API")
            .metricData(MetricDatum.builder()
                .metricName("ResponseTime")
                .value(event.getResponseTime())
                .unit(StandardUnit.MILLISECONDS)
                .dimensions(Dimension.builder()
                    .name("Endpoint")
                    .value(event.getEndpoint())
                    .build())
                .timestamp(Instant.now())
                .build())
            .build();
            
        cloudWatchClient.putMetricData(request);
    }
}
```

---

## 8.4 ì‹¤íŒ¨ ì‚¬ë¡€ ë¶„ì„

### 8.4.1 ê³¼ë„í•œ ì—”ì§€ë‹ˆì–´ë§ ì‚¬ë¡€

#### ë¬¸ì œ ìƒí™©
ìŠ¤íƒ€íŠ¸ì—…ì—ì„œ ì´ˆê¸°ë¶€í„° ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì•„í‚¤í…ì²˜ë¥¼ ë„ì…í•˜ì—¬ ê°œë°œ ë³µì¡ì„±ì´ ê¸‰ê²©íˆ ì¦ê°€

```java
// ë¬¸ì œê°€ ëœ ê³¼ë„í•œ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ë¶„í•´
@RestController
public class UserController {
    
    @Autowired
    private UserBasicInfoService userBasicInfoService;  // ë³„ë„ ì„œë¹„ìŠ¤
    
    @Autowired  
    private UserPreferenceService userPreferenceService; // ë³„ë„ ì„œë¹„ìŠ¤
    
    @Autowired
    private UserActivityService userActivityService;    // ë³„ë„ ì„œë¹„ìŠ¤
    
    @GetMapping("/users/{userId}")
    public ResponseEntity<UserProfile> getUserProfile(@PathVariable String userId) {
        // 3ê°œì˜ ì„œë¹„ìŠ¤ í˜¸ì¶œë¡œ ì¸í•œ ë„¤íŠ¸ì›Œí¬ ì§€ì—° ì¦ê°€
        CompletableFuture<UserBasicInfo> basicInfo = userBasicInfoService.getBasicInfo(userId);
        CompletableFuture<UserPreference> preference = userPreferenceService.getPreference(userId);
        CompletableFuture<UserActivity> activity = userActivityService.getRecentActivity(userId);
        
        // ë¶„ì‚° íŠ¸ëœì­ì…˜ ë³µì¡ì„±
        return CompletableFuture.allOf(basicInfo, preference, activity)
            .thenApply(v -> new UserProfile(
                basicInfo.join(),
                preference.join(), 
                activity.join()
            ))
            .thenApply(ResponseEntity::ok)
            .join();
    }
}

// ê°œì„ ëœ ì ‘ê·¼ë²•: ë‹¨ìˆœí•œ ëª¨ë†€ë¦¬ìŠ¤ë¶€í„° ì‹œì‘
@Service
public class UserService {
    
    @Autowired
    private UserRepository userRepository;
    
    public UserProfile getUserProfile(String userId) {
        // ë‹¨ì¼ ë°ì´í„°ë² ì´ìŠ¤ ì¡°íšŒë¡œ ëª¨ë“  ì •ë³´ íšë“
        User user = userRepository.findById(userId)
            .orElseThrow(() -> new UserNotFoundException("ì‚¬ìš©ìë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤"));
            
        return new UserProfile(
            user.getBasicInfo(),
            user.getPreference(),
            user.getRecentActivity()
        );
    }
}
```

### 8.4.2 ì„±ëŠ¥ ë¬¸ì œ ì‚¬ë¡€

#### N+1 ì¿¼ë¦¬ ë¬¸ì œ
```java
// ë¬¸ì œê°€ ëœ ì½”ë“œ
@Service
public class OrderService {
    
    public List<OrderSummary> getAllOrders() {
        List<Order> orders = orderRepository.findAll(); // 1ë²ˆì˜ ì¿¼ë¦¬
        
        return orders.stream()
            .map(order -> {
                // ê° ì£¼ë¬¸ë³„ë¡œ ì¶”ê°€ ì¿¼ë¦¬ ë°œìƒ (Në²ˆì˜ ì¿¼ë¦¬)
                Customer customer = customerRepository.findById(order.getCustomerId()).get();
                List<OrderItem> items = orderItemRepository.findByOrderId(order.getId());
                
                return new OrderSummary(order, customer, items);
            })
            .collect(Collectors.toList());
    }
}

// ê°œì„ ëœ ì½”ë“œ
@Service
public class OrderService {
    
    public List<OrderSummary> getAllOrders() {
        // Join Fetchë¥¼ í†µí•œ ë‹¨ì¼ ì¿¼ë¦¬ë¡œ ëª¨ë“  ë°ì´í„° ì¡°íšŒ
        List<Order> orders = orderRepository.findAllWithCustomerAndItems();
        
        return orders.stream()
            .map(order -> new OrderSummary(
                order,
                order.getCustomer(), // ì´ë¯¸ ë¡œë“œë¨
                order.getItems()     // ì´ë¯¸ ë¡œë“œë¨
            ))
            .collect(Collectors.toList());
    }
}

// Repositoryì—ì„œ Join Fetch ì‚¬ìš©
@Repository
public interface OrderRepository extends JpaRepository<Order, String> {
    
    @Query("SELECT o FROM Order o " +
           "JOIN FETCH o.customer " +
           "JOIN FETCH o.items")
    List<Order> findAllWithCustomerAndItems();
}
```

### 8.4.3 ë³´ì•ˆ ì·¨ì•½ì  ì‚¬ë¡€

#### ì¸ì¦ ìš°íšŒ ì·¨ì•½ì 
```java
// ì·¨ì•½í•œ JWT ê²€ì¦ ì½”ë“œ
@Component
public class JwtTokenValidator {
    
    public boolean validateToken(String token) {
        try {
            // ìœ„í—˜: ì‹œê·¸ë‹ˆì²˜ ê²€ì¦ ì—†ì´ í† í° íŒŒì‹±
            Jwt jwt = Jwts.parser().parse(token);
            Date expiration = jwt.getBody().getExpiration();
            
            return expiration.after(new Date());
        } catch (Exception e) {
            return false;
        }
    }
}

// ë³´ì•ˆ ê°•í™”ëœ JWT ê²€ì¦ ì½”ë“œ
@Component
public class SecureJwtTokenValidator {
    
    @Value("${jwt.secret}")
    private String jwtSecret;
    
    public boolean validateToken(String token) {
        try {
            // ì‹œê·¸ë‹ˆì²˜ ê²€ì¦ í¬í•¨
            Jws<Claims> claimsJws = Jwts.parserBuilder()
                .setSigningKey(jwtSecret.getBytes())
                .build()
                .parseClaimsJws(token);
                
            // ì¶”ê°€ ê²€ì¦: ë°œê¸‰ì, ëŒ€ìƒì í™•ì¸
            Claims claims = claimsJws.getBody();
            String issuer = claims.getIssuer();
            String audience = claims.getAudience();
            
            return "my-app".equals(issuer) && 
                   "api-users".equals(audience) &&
                   claims.getExpiration().after(new Date());
                   
        } catch (JwtException | IllegalArgumentException e) {
            log.warn("JWT í† í° ê²€ì¦ ì‹¤íŒ¨: {}", e.getMessage());
            return false;
        }
    }
}
```

---

## 8.5 ì‹¤íŒ¨ íšŒí”¼ ì „ëµ

### 8.5.1 ì ì§„ì  ì ‘ê·¼ë²•

```java
// ì¹´ë‚˜ë¦¬ ë°°í¬ë¥¼ í†µí•œ ì ì§„ì  ì „í™˜
@Component
public class DeploymentStrategy {
    
    @Autowired
    private LoadBalancer loadBalancer;
    
    public void deployCanaryRelease(String newVersion, double canaryPercentage) {
        // 1. ìƒˆ ë²„ì „ì„ ì†Œìˆ˜ì˜ ì¸ìŠ¤í„´ìŠ¤ì—ë§Œ ë°°í¬
        List<Instance> canaryInstances = deployToCanaryInstances(newVersion);
        
        // 2. íŠ¸ë˜í”½ì˜ ì¼ë¶€ë§Œ ìƒˆ ë²„ì „ìœ¼ë¡œ ë¼ìš°íŒ…
        loadBalancer.updateRouting(canaryInstances, canaryPercentage);
        
        // 3. ë©”íŠ¸ë¦­ ëª¨ë‹ˆí„°ë§ ì‹œì‘
        startCanaryMonitoring(canaryInstances);
        
        // 4. ìë™ ë¡¤ë°± ì¡°ê±´ ì„¤ì •
        scheduleHealthCheck(canaryInstances, newVersion);
    }
    
    @Scheduled(fixedDelay = 60000) // 1ë¶„ë§ˆë‹¤ ì²´í¬
    public void checkCanaryHealth() {
        if (canaryMetrics.getErrorRate() > 5.0) {
            // ì—ëŸ¬ìœ¨ì´ 5%ë¥¼ ì´ˆê³¼í•˜ë©´ ìë™ ë¡¤ë°±
            rollbackCanary();
            alertService.sendAlert("ì¹´ë‚˜ë¦¬ ë°°í¬ ìë™ ë¡¤ë°± ì‹¤í–‰ë¨");
        } else if (canaryMetrics.getSuccessRate() > 95.0 && 
                   Duration.between(canaryStartTime, Instant.now()).toMinutes() > 30) {
            // 30ë¶„ê°„ ì„±ê³µë¥ ì´ 95% ì´ìƒì´ë©´ ì „ì²´ ë°°í¬ ì§„í–‰
            promoteCanaryToProduction();
        }
    }
}
```

### 8.5.2 ëª¨ë‹ˆí„°ë§ê³¼ ê´€ì°° ê°€ëŠ¥ì„±

```java
// ì¢…í•©ì ì¸ ëª¨ë‹ˆí„°ë§ ì‹œìŠ¤í…œ
@Component
public class SystemObservability {
    
    @Autowired
    private MeterRegistry meterRegistry;
    
    @Autowired
    private Tracer tracer;
    
    @EventListener
    public void recordBusinessMetrics(OrderCreatedEvent event) {
        // ë¹„ì¦ˆë‹ˆìŠ¤ ë©”íŠ¸ë¦­ ìˆ˜ì§‘
        meterRegistry.counter("business.orders.created").increment();
        meterRegistry.timer("business.order.processing.time").record(event.getProcessingTime());
        
        // ë§¤ì¶œ ê´€ë ¨ ë©”íŠ¸ë¦­
        DistributionSummary.builder("business.revenue.per.order")
            .register(meterRegistry)
            .record(event.getOrderAmount().doubleValue());
    }
    
    @EventListener  
    public void recordTechnicalMetrics(ApiCallEvent event) {
        // ê¸°ìˆ ì  ë©”íŠ¸ë¦­ ìˆ˜ì§‘
        Timer.Sample sample = Timer.start(meterRegistry);
        sample.stop(Timer.builder("api.response.time")
            .tag("endpoint", event.getEndpoint())
            .tag("method", event.getHttpMethod())
            .register(meterRegistry));
            
        // ë¶„ì‚° ì¶”ì  ì •ë³´ ì¶”ê°€
        Span span = tracer.nextSpan()
            .name("api.call")
            .tag("endpoint", event.getEndpoint())
            .tag("user.id", event.getUserId());
            
        try (Tracer.SpanInScope ws = tracer.withSpanInScope(span.start())) {
            span.tag("response.status", String.valueOf(event.getResponseStatus()));
        } finally {
            span.end();
        }
    }
}
```

---

## ğŸ¯ í•µì‹¬ ìš”ì•½

### ì„±ê³µ ì‚¬ë¡€ì˜ ê³µí†µ íŒ¨í„´

| **íšŒì‚¬** | **í•µì‹¬ ì „ëµ** | **ê¸°ìˆ ì  í˜ì‹ ** | **ë¹„ì¦ˆë‹ˆìŠ¤ ì„íŒ©íŠ¸** |
|---------|-------------|---------------|------------------|
| **Netflix** | ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ + Chaos Engineering | Hystrix, Eureka, Zuul | ê¸€ë¡œë²Œ ìŠ¤ì¼€ì¼ë§ ì„±ê³µ |
| **Amazon** | API-First + ë°ì´í„° ì†Œìœ ê¶Œ | Two Pizza Team, SOA | ë§ˆì¼“í”Œë ˆì´ìŠ¤ ìƒíƒœê³„ êµ¬ì¶• |
| **Uber** | ì‹¤ì‹œê°„ + ì§€ë¦¬ì  ë¶„ì‚° | í´ë¦¬ê¸€ë ì•„í‚¤í…ì²˜ | ìƒˆë¡œìš´ ì‚°ì—… ì°½ì¡° |

### ì‹¤íŒ¨ ì‚¬ë¡€ì˜ êµí›ˆ

1. **ê³¼ë„í•œ ì—”ì§€ë‹ˆì–´ë§**: ë¹„ì¦ˆë‹ˆìŠ¤ ê·œëª¨ì— ë§ëŠ” ì•„í‚¤í…ì²˜ ì„ íƒ
2. **ì„±ëŠ¥ ìµœì í™” ì†Œí™€**: ì´ˆê¸°ë¶€í„° ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ì™€ ëª¨ë‹ˆí„°ë§ êµ¬ì¶•
3. **ë³´ì•ˆ ê°„ê³¼**: ë³´ì•ˆì„ ë‚˜ì¤‘ì— ì¶”ê°€í•˜ëŠ” ê²ƒë³´ë‹¤ ì²˜ìŒë¶€í„° ê³ ë ¤
4. **ì ì§„ì  ì ‘ê·¼ ë¬´ì‹œ**: ë¹…ë±… ë°©ì‹ë³´ë‹¤ëŠ” ë‹¨ê³„ì  ì „í™˜

### ì‹¤ë¬´ ì ìš© ê°€ì´ë“œ

1. **í˜„ì¬ ìƒí™© ë¶„ì„**: ë¹„ì¦ˆë‹ˆìŠ¤ ìš”êµ¬ì‚¬í•­ê³¼ ê¸°ìˆ ì  ì œì•½ì‚¬í•­ íŒŒì•…
2. **ì ì§„ì  ê³„íš**: ë‹¨ê³„ë³„ ì „í™˜ ê³„íš ìˆ˜ë¦½
3. **ì§€ì†ì  ëª¨ë‹ˆí„°ë§**: ë³€ê²½ ì‚¬í•­ì˜ ì˜í–¥ë„ ì¸¡ì •
4. **ë¡¤ë°± ì¤€ë¹„**: ì‹¤íŒ¨ ì‹œ ì‹ ì†í•œ ë³µêµ¬ ë°©ì•ˆ ë§ˆë ¨

---

## ğŸ’­ ìƒê°í•´ë³´ê¸°

1. í˜„ì¬ ì¡°ì§ì—ì„œ Netflixë‚˜ Amazonì˜ ì•„í‚¤í…ì²˜ ì „ëµ ì¤‘ ì ìš© ê°€ëŠ¥í•œ ê²ƒì€?
2. ë ˆê±°ì‹œ ì‹œìŠ¤í…œ ëª¨ë˜í™” ì‹œ ê°€ì¥ í° ìœ„í—˜ ìš”ì†ŒëŠ” ë¬´ì—‡ì´ê³  ì–´ë–»ê²Œ ëŒ€ë¹„í•  ìˆ˜ ìˆì„ê¹Œ?
3. í´ë¼ìš°ë“œ ë§ˆì´ê·¸ë ˆì´ì…˜ì—ì„œ ë¹„ìš© ìµœì í™”ì™€ ì„±ëŠ¥ ìµœì í™”ì˜ ê· í˜•ì ì€?

---

## ğŸ“š ì¶”ê°€ í•™ìŠµ ìë£Œ

### ë„ì„œ
- "Building Microservices" - Sam Newman
- "The Phoenix Project" - Gene Kim
- "Accelerate" - Nicole Forsgren

### ì˜¨ë¼ì¸ ìë£Œ
- Netflix Technology Blog
- Amazon Architecture Center  
- Uber Engineering Blog
- High Scalability ì›¹ì‚¬ì´íŠ¸
- AWS Case Studies 